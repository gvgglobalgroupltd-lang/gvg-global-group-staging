
Running 1 test using 1 worker

BROWSER info: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
BROWSER log: [HMR] connected
Navigated to /admin/deals/create
Redirected to Login. Performing login...
Clicked Sign In
Navigated to Dashboard after login
BROWSER warning: Detected `scroll-behavior: smooth` on the `<html>` element. To disable smooth scrolling during route transitions, add `data-scroll-behavior="smooth"` to your <html> element. Learn more: https://nextjs.org/docs/messages/missing-data-scroll-behavior
BROWSER error: Failed to load shipments: TypeError: Failed to fetch
    at fetchServerAction (http://localhost:3000/_next/static/chunks/node_modules_next_dist_client_17643121._.js:8817:23)
BROWSER error: Failed to load action items: {message: TypeError: Failed to fetch, details: TypeError: Failed to fetch
    at http://localhostâ€¦t:3000/_next/static/chunks/_b397b186._.js:248:37), hint: , code: }
BROWSER error: Failed to load IT leads: {message: TypeError: Failed to fetch, details: TypeError: Failed to fetch
    at http://localhostâ€¦t:3000/_next/static/chunks/_b397b186._.js:969:37), hint: , code: }
BROWSER error: Failed to load IT leads: {message: TypeError: Failed to fetch, details: TypeError: Failed to fetch
    at http://localhostâ€¦t:3000/_next/static/chunks/_b397b186._.js:969:37), hint: , code: }
BROWSER error: Failed to load action items: {message: TypeError: Failed to fetch, details: TypeError: Failed to fetch
    at http://localhostâ€¦t:3000/_next/static/chunks/_b397b186._.js:248:37), hint: , code: }
BROWSER info: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
BROWSER log: [HMR] connected
Navigated to /admin/deals/create explicitly
Deal Wizard loaded
=== Step 1: Sourcing & Compliance ===
Selecting supplier...
Selected supplier
Selecting origin country...
Selected USA as origin
Selecting commodity...
Selected commodity
BROWSER log: === handleNext Debug ===
BROWSER log: Current Step: 0 - Sourcing
BROWSER log: Fields to validate: [partnerId, commodityId, originCountry, isriCode, packagingType, guaranteedRecovery, moistureTolerance, dustTolerance, radioactivityLimit, quantityTolerance, qualitySpecs, validityDate, psicFile]
BROWSER log: Current form values: {partnerId: ba252882-cf04-4939-9608-7230b69567ea, commodityId: 698f1ab7-9837-49f5-8dc2-5d919def0727, originCountry: USA, isriCode: , packagingType: undefined}
BROWSER log: Base validation result: true
BROWSER log: Full validation success: true
BROWSER log: âœ… Validation passed, advancing to next step
Clicked Next Step (to Pricing)
Step 2 loaded successfully!
=== Step 2: Pricing & Payment ===
Filled buy price
Filled weight
Filled ocean freight (required for FOB)
Filled payment split: 30% advance, 70% balance
BROWSER log: === handleNext Debug ===
BROWSER log: Current Step: 1 - Pricing & Payment
BROWSER log: Fields to validate: [incoterm, buyPrice, currency, weightMT, oceanFreight, insurance, paymentMethod, paymentTerms, advancePercent, balancePercent, lcNumber, lcExpiryDate, issuingBank]
BROWSER log: Current form values: {partnerId: ba252882-cf04-4939-9608-7230b69567ea, commodityId: 698f1ab7-9837-49f5-8dc2-5d919def0727, originCountry: USA, isriCode: , packagingType: undefined}
BROWSER log: Base validation result: true
BROWSER log: Full validation success: true
BROWSER log: âœ… Validation passed, advancing to next step
Clicked Next Step (to Logistics)
Step 3 loaded successfully!
=== Step 3: Logistics & Shipment ===
Filled port of loading
Filled port of discharge
BROWSER log: === handleNext Debug ===
BROWSER log: Current Step: 2 - Logistics
BROWSER log: Fields to validate: [portOfLoading, portOfDischarge, shipmentPeriodStart, shipmentPeriodEnd, partialShipment, transshipment, freeDays, shippingLine, freightForwarder, claimsDays, weightFranchise]
BROWSER log: Current form values: {partnerId: ba252882-cf04-4939-9608-7230b69567ea, commodityId: 698f1ab7-9837-49f5-8dc2-5d919def0727, originCountry: USA, isriCode: , packagingType: undefined}
BROWSER log: Base validation result: true
BROWSER log: Full validation success: true
BROWSER log: âœ… Validation passed, advancing to next step
Clicked Next Step (to Review)
BROWSER log: [Fast Refresh] rebuilding
BROWSER log: [Fast Refresh] done in 139ms
BROWSER warning: Detected `scroll-behavior: smooth` on the `<html>` element. To disable smooth scrolling during route transitions, add `data-scroll-behavior="smooth"` to your <html> element. Learn more: https://nextjs.org/docs/messages/missing-data-scroll-behavior
BROWSER log: [Fast Refresh] rebuilding
BROWSER log: [Fast Refresh] done in 127ms
BROWSER log: [Fast Refresh] rebuilding
BROWSER log: [Fast Refresh] done in 149ms
BROWSER log: [Fast Refresh] rebuilding
BROWSER log: [Fast Refresh] done in 127ms
BROWSER log: [Fast Refresh] rebuilding
BROWSER log: [Fast Refresh] done in 125ms
BROWSER log: [Fast Refresh] rebuilding
BROWSER log: [Fast Refresh] done in 164ms
  âœ˜  1 [chromium] â€º tests\deals.spec.ts:3:5 â€º add new deal flow (16.5s)


  1) [chromium] â€º tests\deals.spec.ts:3:5 â€º add new deal flow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    TimeoutError: locator.waitFor: Timeout 10000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('heading', { name: 'Review' }) to be visible[22m


      124 |
      125 |     // Wait for Step 4 (Review) to load
    > 126 |     await page.getByRole('heading', { name: 'Review' }).waitFor({ state: 'visible', timeout: 10000 });
          |                                                         ^
      127 |     console.log('Step 4 (Review) loaded successfully!');
      128 |
      129 |     // ==================== STEP 4: Review & Submit ====================
        at D:\GVGGlobalGroup\gvg-portal\tests\deals.spec.ts:126:57

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\deals-add-new-deal-flow-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\deals-add-new-deal-flow-chromium\video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\deals-add-new-deal-flow-chromium\error-context.md

  1 failed
    [chromium] â€º tests\deals.spec.ts:3:5 â€º add new deal flow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
